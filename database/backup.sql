--
-- PostgreSQL database dump
--

-- Dumped from database version 16.9 (Debian 16.9-1.pgdg120+1)
-- Dumped by pg_dump version 16.9 (Debian 16.9-1.pgdg120+1)

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

ALTER TABLE IF EXISTS ONLY public.showings DROP CONSTRAINT IF EXISTS showings_theatre_id_fkey;
ALTER TABLE IF EXISTS ONLY public.showings DROP CONSTRAINT IF EXISTS showings_movie_id_fkey;
ALTER TABLE IF EXISTS ONLY public.theatres DROP CONSTRAINT IF EXISTS theatres_pkey;
ALTER TABLE IF EXISTS ONLY public.showings DROP CONSTRAINT IF EXISTS showings_pkey;
ALTER TABLE IF EXISTS ONLY public.movies DROP CONSTRAINT IF EXISTS movies_pkey;
DROP TABLE IF EXISTS public.theatres;
DROP TABLE IF EXISTS public.showings;
DROP TABLE IF EXISTS public.movies;
SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: movies; Type: TABLE; Schema: public; Owner: admin
--

CREATE TABLE public.movies (
    movie_id integer NOT NULL,
    name text NOT NULL,
    rating character varying(4),
    runtime interval,
    opening_date date
);


ALTER TABLE public.movies OWNER TO admin;

--
-- Name: movies_movie_id_seq; Type: SEQUENCE; Schema: public; Owner: admin
--

ALTER TABLE public.movies ALTER COLUMN movie_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.movies_movie_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: showings; Type: TABLE; Schema: public; Owner: admin
--

CREATE TABLE public.showings (
    show_id bigint NOT NULL,
    theatre_id integer NOT NULL,
    movie_id integer NOT NULL,
    tickets integer NOT NULL,
    ticket_price numeric(6,2) NOT NULL,
    show_date date NOT NULL,
    show_time time without time zone NOT NULL
);


ALTER TABLE public.showings OWNER TO admin;

--
-- Name: showings_show_id_seq; Type: SEQUENCE; Schema: public; Owner: admin
--

ALTER TABLE public.showings ALTER COLUMN show_id ADD GENERATED ALWAYS AS IDENTITY (
    SEQUENCE NAME public.showings_show_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Name: theatres; Type: TABLE; Schema: public; Owner: admin
--

CREATE TABLE public.theatres (
    theatre_id integer NOT NULL,
    name text NOT NULL,
    city text,
    state character(2),
    owner text,
    screens integer
);


ALTER TABLE public.theatres OWNER TO admin;

--
-- Name: theatres_theatre_id_seq; Type: SEQUENCE; Schema: public; Owner: admin
--

ALTER TABLE public.theatres ALTER COLUMN theatre_id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.theatres_theatre_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- Data for Name: movies; Type: TABLE DATA; Schema: public; Owner: admin
--

COPY public.movies (movie_id, name, rating, runtime, opening_date) FROM stdin;
1	Lilo & Stitch	PG	01:48:00	2025-05-23
2	Mission: Impossilbe - The Final Reckoning	PG13	02:49:00	2025-05-23
3	Karate Kid: Legends	PG13	01:34:00	2025-05-30
4	Bring Her Back	R	01:44:00	2025-05-30
\.


--
-- Data for Name: showings; Type: TABLE DATA; Schema: public; Owner: admin
--

COPY public.showings (show_id, theatre_id, movie_id, tickets, ticket_price, show_date, show_time) FROM stdin;
1	1	1	20	10.00	2025-05-30	11:00:00
2	1	2	15	10.00	2025-05-30	11:30:00
3	2	1	13	10.00	2025-05-30	11:10:00
4	2	3	18	12.00	2025-05-30	11:40:00
9	1	1	10	10.00	2025-05-31	11:00:00
10	1	3	14	10.00	2025-05-31	11:15:00
11	1	1	23	15.00	2025-05-31	15:30:00
12	1	3	21	15.00	2025-05-31	16:00:00
13	2	2	13	10.00	2025-05-31	11:10:00
14	2	3	12	10.00	2025-05-31	11:30:00
15	2	2	26	15.00	2025-05-31	17:00:00
16	2	1	28	15.00	2025-05-31	16:30:00
5	1	2	30	15.00	2025-05-30	14:00:00
6	2	1	25	15.00	2025-05-30	15:30:00
7	1	1	21	15.00	2025-05-30	14:20:00
8	2	2	16	15.00	2025-05-30	15:00:00
19	3	4	10	15.00	2025-05-31	16:00:00
20	3	4	11	15.00	2025-05-31	19:00:00
\.


--
-- Data for Name: theatres; Type: TABLE DATA; Schema: public; Owner: admin
--

COPY public.theatres (theatre_id, name, city, state, owner, screens) FROM stdin;
2	Cinemark Howard Hughes Los Angeles and XD	Los Angeles	CA	Cinemark	16
4	AMC Santa Monica 7	Santa Monica	CA	AMC	7
3	AMC Century City 15	Los Angeles	CA	AMC	15
1	Cinemark Playa Vista and XD	Playa Vista	CA	Cinemark	8
\.


--
-- Name: movies_movie_id_seq; Type: SEQUENCE SET; Schema: public; Owner: admin
--

SELECT pg_catalog.setval('public.movies_movie_id_seq', 4, true);


--
-- Name: showings_show_id_seq; Type: SEQUENCE SET; Schema: public; Owner: admin
--

SELECT pg_catalog.setval('public.showings_show_id_seq', 20, true);


--
-- Name: theatres_theatre_id_seq; Type: SEQUENCE SET; Schema: public; Owner: admin
--

SELECT pg_catalog.setval('public.theatres_theatre_id_seq', 4, true);


--
-- Name: movies movies_pkey; Type: CONSTRAINT; Schema: public; Owner: admin
--

ALTER TABLE ONLY public.movies
    ADD CONSTRAINT movies_pkey PRIMARY KEY (movie_id);


--
-- Name: showings showings_pkey; Type: CONSTRAINT; Schema: public; Owner: admin
--

ALTER TABLE ONLY public.showings
    ADD CONSTRAINT showings_pkey PRIMARY KEY (show_id);


--
-- Name: theatres theatres_pkey; Type: CONSTRAINT; Schema: public; Owner: admin
--

ALTER TABLE ONLY public.theatres
    ADD CONSTRAINT theatres_pkey PRIMARY KEY (theatre_id);


--
-- Name: showings showings_movie_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: admin
--

ALTER TABLE ONLY public.showings
    ADD CONSTRAINT showings_movie_id_fkey FOREIGN KEY (movie_id) REFERENCES public.movies(movie_id);


--
-- Name: showings showings_theatre_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: admin
--

ALTER TABLE ONLY public.showings
    ADD CONSTRAINT showings_theatre_id_fkey FOREIGN KEY (theatre_id) REFERENCES public.theatres(theatre_id);


--
-- PostgreSQL database dump complete
--

